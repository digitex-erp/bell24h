<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bell24h - Login/Register</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #3182ce;
      --primary-dark: #2c5282;
      --secondary-color: #1a365d;
      --accent-color: #4fd1c5;
      --light-color: #f7fafc;
      --dark-color: #2d3748;
      --success-color: #38a169;
      --warning-color: #d69e2e;
      --danger-color: #e53e3e;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8fafc;
      color: var(--dark-color);
      line-height: 1.6;
    }
    
    .navbar {
      background-color: white;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .navbar-brand {
      font-weight: bold;
      color: var(--primary-color);
      font-size: 1.5rem;
    }
    
    .navbar-brand span {
      color: var(--secondary-color);
    }
    
    .auth-container {
      padding: 80px 0;
      min-height: calc(100vh - 76px);
    }
    
    .auth-card {
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      overflow: hidden;
      background-color: white;
    }
    
    .auth-hero {
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
      color: white;
      padding: 40px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: 100%;
    }
    
    .auth-hero h2 {
      font-size: 2.2rem;
      font-weight: 700;
      margin-bottom: 20px;
    }
    
    .auth-hero p {
      font-size: 1.1rem;
      opacity: 0.9;
      margin-bottom: 20px;
    }
    
    .auth-form {
      padding: 40px;
    }
    
    .auth-form h3 {
      font-size: 1.8rem;
      font-weight: 600;
      margin-bottom: 30px;
      color: var(--secondary-color);
    }
    
    .form-control {
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #e2e8f0;
    }
    
    .form-control:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.25rem rgba(49, 130, 206, 0.25);
    }
    
    .form-label {
      font-weight: 500;
    }
    
    .btn-primary {
      background-color: var(--primary-color);
      border-color: var(--primary-color);
      padding: 12px;
      font-weight: 500;
    }
    
    .btn-primary:hover {
      background-color: var(--primary-dark);
      border-color: var(--primary-dark);
    }
    
    .auth-divider {
      position: relative;
      text-align: center;
      margin: 20px 0;
    }
    
    .auth-divider::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 1px;
      background-color: #e2e8f0;
      z-index: 1;
    }
    
    .auth-divider span {
      position: relative;
      background-color: white;
      padding: 0 10px;
      z-index: 2;
      color: #718096;
    }
    
    .social-login {
      margin-bottom: 20px;
    }
    
    .social-btn {
      padding: 10px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .google-btn {
      background-color: white;
      border: 1px solid #e2e8f0;
      color: #4a5568;
    }
    
    .google-btn:hover {
      background-color: #f8fafc;
      border-color: #cbd5e0;
    }
    
    .linkedin-btn {
      background-color: #0A66C2;
      border: 1px solid #0A66C2;
      color: white;
    }
    
    .linkedin-btn:hover {
      background-color: #0958a8;
      border-color: #0958a8;
    }
    
    .social-btn i {
      margin-right: 10px;
      font-size: 1.2rem;
    }
    
    .auth-footer {
      text-align: center;
      margin-top: 20px;
      font-size: 0.9rem;
      color: #718096;
    }
    
    .switch-form {
      font-weight: 500;
      color: var(--primary-color);
      cursor: pointer;
    }
    
    .registration-steps {
      margin-bottom: 30px;
    }
    
    .step-indicator {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
    }
    
    .step {
      flex: 1;
      text-align: center;
      position: relative;
    }
    
    .step::after {
      content: '';
      position: absolute;
      top: 20px;
      left: 50%;
      right: -50%;
      height: 2px;
      background-color: #e2e8f0;
      z-index: 1;
    }
    
    .step:last-child::after {
      display: none;
    }
    
    .step-number {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: #e2e8f0;
      color: #718096;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      margin: 0 auto 10px;
      position: relative;
      z-index: 2;
    }
    
    .step.active .step-number {
      background-color: var(--primary-color);
      color: white;
    }
    
    .step.completed .step-number {
      background-color: var(--success-color);
      color: white;
    }
    
    .step-title {
      font-size: 0.9rem;
      color: #718096;
    }
    
    .step.active .step-title {
      color: var(--primary-color);
      font-weight: 500;
    }
    
    .step.completed .step-title {
      color: var(--success-color);
      font-weight: 500;
    }
    
    .registration-form {
      margin-top: 20px;
    }
    
    .registration-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
    }
    
    @media (max-width: 768px) {
      .auth-container {
        padding: 40px 0;
      }
      
      .auth-hero {
        padding: 30px;
      }
      
      .auth-form {
        padding: 30px;
      }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg sticky-top">
    <div class="container">
      <a class="navbar-brand" href="landing.html">Bell<span>24h</span></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="landing.html#features">Features</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="landing.html#pricing">Pricing</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="api-docs.html">API Docs</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Auth Container -->
  <div class="auth-container">
    <div class="container">
      <div class="row g-0 auth-card">
        <!-- Hero Column -->
        <div class="col-lg-6 d-none d-lg-block">
          <div class="auth-hero">
            <h2>Transform Your Import/Export Business</h2>
            <p>Bell24h connects buyers and suppliers with AI-powered matching, risk assessment, and integrated financial services.</p>
            <div class="mb-4">
              <div class="d-flex align-items-center mb-3">
                <i class="fas fa-check-circle me-3" style="font-size: 1.5rem;"></i>
                <span>Voice-enabled RFQ submission</span>
              </div>
              <div class="d-flex align-items-center mb-3">
                <i class="fas fa-check-circle me-3" style="font-size: 1.5rem;"></i>
                <span>AI-driven supplier matching</span>
              </div>
              <div class="d-flex align-items-center mb-3">
                <i class="fas fa-check-circle me-3" style="font-size: 1.5rem;"></i>
                <span>Comprehensive risk scoring</span>
              </div>
              <div class="d-flex align-items-center">
                <i class="fas fa-check-circle me-3" style="font-size: 1.5rem;"></i>
                <span>Blockchain-verified transactions</span>
              </div>
            </div>
            <p>Already working with over 5,000+ businesses across India, Dubai, and the Middle East.</p>
          </div>
        </div>
        
        <!-- Form Column -->
        <div class="col-lg-6">
          <div class="auth-form">
            <!-- Login Form -->
            <div id="login-form">
              <h3>Login to Your Account</h3>
              <form id="loginForm">
                <div class="mb-3">
                  <label for="loginEmail" class="form-label">Email or Username</label>
                  <input type="text" class="form-control" id="loginEmail" placeholder="Enter your email or username">
                </div>
                <div class="mb-3">
                  <label for="loginPassword" class="form-label">Password</label>
                  <input type="password" class="form-control" id="loginPassword" placeholder="Enter your password">
                </div>
                <div class="d-flex justify-content-between mb-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="rememberMe">
                    <label class="form-check-label" for="rememberMe">Remember me</label>
                  </div>
                  <a href="#" class="text-decoration-none">Forgot password?</a>
                </div>
                <button type="button" class="btn btn-primary w-100 mb-3" onclick="handleLogin()">Login</button>
                
                <div class="auth-divider">
                  <span>Or login with</span>
                </div>
                
                <div class="row social-login">
                  <div class="col-6">
                    <div class="social-btn google-btn">
                      <i class="fab fa-google"></i> Google
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="social-btn linkedin-btn">
                      <i class="fab fa-linkedin-in"></i> LinkedIn
                    </div>
                  </div>
                </div>
              </form>
              
              <div class="auth-footer">
                Don't have an account? <span class="switch-form" onclick="toggleForm('register')">Register</span>
              </div>
            </div>
            
            <!-- Registration Form -->
            <div id="register-form" style="display: none;">
              <h3>Create an Account</h3>
              
              <div class="registration-steps">
                <div class="step-indicator">
                  <div class="step active" id="step1">
                    <div class="step-number">1</div>
                    <div class="step-title">Account</div>
                  </div>
                  <div class="step" id="step2">
                    <div class="step-number">2</div>
                    <div class="step-title">Company</div>
                  </div>
                  <div class="step" id="step3">
                    <div class="step-number">3</div>
                    <div class="step-title">Verification</div>
                  </div>
                </div>
              </div>
              
              <!-- Step 1: Account Information -->
              <div class="registration-form" id="step1-form">
                <form id="accountForm">
                  <div class="mb-3">
                    <label for="registerEmail" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="registerEmail" placeholder="Enter your email">
                  </div>
                  <div class="mb-3">
                    <label for="registerUsername" class="form-label">Username</label>
                    <input type="text" class="form-control" id="registerUsername" placeholder="Choose a username">
                  </div>
                  <div class="mb-3">
                    <label for="registerPassword" class="form-label">Password</label>
                    <input type="password" class="form-control" id="registerPassword" placeholder="Create a password">
                    <div class="form-text">Password must be at least 8 characters with numbers and special characters.</div>
                  </div>
                  <div class="mb-3">
                    <label for="confirmPassword" class="form-label">Confirm Password</label>
                    <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm your password">
                  </div>
                  <div class="registration-nav">
                    <div></div>
                    <button type="button" class="btn btn-primary" onclick="nextStep(1, 2)">Next</button>
                  </div>
                </form>
              </div>
              
              <!-- Step 2: Company Information -->
              <div class="registration-form" id="step2-form" style="display: none;">
                <form id="companyForm">
                  <div class="mb-3">
                    <label for="companyName" class="form-label">Company Name</label>
                    <input type="text" class="form-control" id="companyName" placeholder="Enter your company name">
                  </div>
                  <div class="mb-3">
                    <label for="userType" class="form-label">Account Type</label>
                    <select class="form-control" id="userType">
                      <option value="">Select your account type</option>
                      <option value="buyer">Buyer</option>
                      <option value="supplier">Supplier</option>
                      <option value="both">Both Buyer and Supplier</option>
                    </select>
                  </div>
                  <div class="mb-3">
                    <label for="industry" class="form-label">Industry</label>
                    <select class="form-control" id="industry">
                      <option value="">Select your industry</option>
                      <option value="manufacturing">Manufacturing</option>
                      <option value="electronics">Electronics</option>
                      <option value="textiles">Textiles</option>
                      <option value="chemicals">Chemicals</option>
                      <option value="automotive">Automotive</option>
                      <option value="pharmaceuticals">Pharmaceuticals</option>
                      <option value="food">Food & Beverages</option>
                      <option value="construction">Construction</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                  <div class="mb-3">
                    <label for="location" class="form-label">Business Location</label>
                    <input type="text" class="form-control" id="location" placeholder="City, State, Country">
                  </div>
                  <div class="registration-nav">
                    <button type="button" class="btn btn-outline-secondary" onclick="prevStep(2, 1)">Previous</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep(2, 3)">Next</button>
                  </div>
                </form>
              </div>
              
              <!-- Step 3: Verification -->
              <div class="registration-form" id="step3-form" style="display: none;">
                <form id="verificationForm">
                  <div class="mb-3">
                    <label for="gstNumber" class="form-label">GST Number (Indian businesses)</label>
                    <input type="text" class="form-control" id="gstNumber" placeholder="Enter your GST number (optional)">
                  </div>
                  <div class="mb-4">
                    <label class="form-label">Select Subscription Plan</label>
                    <div class="form-check mb-2">
                      <input class="form-check-input" type="radio" name="plan" id="planBasic" value="basic" checked>
                      <label class="form-check-label" for="planBasic">
                        <strong>Basic</strong> - Free (5 RFQs/month)
                      </label>
                    </div>
                    <div class="form-check mb-2">
                      <input class="form-check-input" type="radio" name="plan" id="planProfessional" value="professional">
                      <label class="form-check-label" for="planProfessional">
                        <strong>Professional</strong> - $99/month (Unlimited RFQs, Advanced Features)
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="plan" id="planEnterprise" value="enterprise">
                      <label class="form-check-label" for="planEnterprise">
                        <strong>Enterprise</strong> - $249/month (Complete Suite with All Features)
                      </label>
                    </div>
                  </div>
                  <div class="mb-3 form-check">
                    <input class="form-check-input" type="checkbox" id="termsAgreement">
                    <label class="form-check-label" for="termsAgreement">
                      I agree to the <a href="#" class="text-decoration-none">Terms of Service</a> and <a href="#" class="text-decoration-none">Privacy Policy</a>
                    </label>
                  </div>
                  <div class="registration-nav">
                    <button type="button" class="btn btn-outline-secondary" onclick="prevStep(3, 2)">Previous</button>
                    <button type="button" class="btn btn-primary" onclick="handleRegistration()">Register</button>
                  </div>
                </form>
              </div>
              
              <div class="auth-footer">
                Already have an account? <span class="switch-form" onclick="toggleForm('login')">Login</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Get URL parameters to determine form view
    window.addEventListener('DOMContentLoaded', function() {
      const urlParams = new URLSearchParams(window.location.search);
      const mode = urlParams.get('mode');
      const plan = urlParams.get('plan');
      
      if (mode === 'register') {
        toggleForm('register');
        
        // Set plan if specified
        if (plan) {
          const planRadio = document.getElementById('plan' + plan.charAt(0).toUpperCase() + plan.slice(1));
          if (planRadio) {
            planRadio.checked = true;
          }
        }
      }
    });
    
    // Toggle between login and registration forms
    function toggleForm(form) {
      if (form === 'login') {
        document.getElementById('login-form').style.display = 'block';
        document.getElementById('register-form').style.display = 'none';
      } else {
        document.getElementById('login-form').style.display = 'none';
        document.getElementById('register-form').style.display = 'block';
      }
    }
    
    // Navigate registration steps
    function nextStep(current, next) {
      // Validate current step
      if (validateStep(current)) {
        // Hide current step
        document.getElementById('step' + current + '-form').style.display = 'none';
        // Show next step
        document.getElementById('step' + next + '-form').style.display = 'block';
        
        // Update step indicators
        document.getElementById('step' + current).classList.remove('active');
        document.getElementById('step' + current).classList.add('completed');
        document.getElementById('step' + next).classList.add('active');
      }
    }
    
    function prevStep(current, prev) {
      // Hide current step
      document.getElementById('step' + current + '-form').style.display = 'none';
      // Show previous step
      document.getElementById('step' + prev + '-form').style.display = 'block';
      
      // Update step indicators
      document.getElementById('step' + current).classList.remove('active');
      document.getElementById('step' + prev).classList.remove('completed');
      document.getElementById('step' + prev).classList.add('active');
    }
    
    // Validate form fields
    function validateStep(step) {
      let isValid = true;
      
      if (step === 1) {
        const email = document.getElementById('registerEmail').value;
        const username = document.getElementById('registerUsername').value;
        const password = document.getElementById('registerPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        
        // Simple validation
        if (!email || !username || !password || !confirmPassword) {
          alert('Please fill in all fields');
          isValid = false;
        } else if (password.length < 8) {
          alert('Password must be at least 8 characters long');
          isValid = false;
        } else if (password !== confirmPassword) {
          alert('Passwords do not match');
          isValid = false;
        }
      } else if (step === 2) {
        const companyName = document.getElementById('companyName').value;
        const userType = document.getElementById('userType').value;
        const industry = document.getElementById('industry').value;
        
        // Simple validation
        if (!companyName || !userType || !industry) {
          alert('Please fill in all required fields');
          isValid = false;
        }
      }
      
      return isValid;
    }
    
    // Handle login
    function handleLogin() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      // Simple validation
      if (!email || !password) {
        alert('Please enter both email/username and password');
        return;
      }
      
      // Send login request
      fetch('/api/auth/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          username: email,
          password: password
        })
      })
      .then(response => response.json())
      .then(data => {
        if (data.user) {
          // Login successful
          alert('Login successful! Redirecting to dashboard...');
          window.location.href = 'dashboard.html';
        } else {
          // Login failed
          alert('Login failed: ' + (data.error || 'Invalid credentials'));
        }
      })
      .catch(error => {
        alert('An error occurred: ' + error.message);
      });
    }
    
    // Handle registration
    function handleRegistration() {
      // Validate final step
      const termsAgreement = document.getElementById('termsAgreement').checked;
      
      if (!termsAgreement) {
        alert('Please agree to the Terms of Service and Privacy Policy');
        return;
      }
      
      // Collect all form data
      const userData = {
        username: document.getElementById('registerUsername').value,
        email: document.getElementById('registerEmail').value,
        password: document.getElementById('registerPassword').value,
        companyName: document.getElementById('companyName').value,
        userType: document.getElementById('userType').value,
        industry: document.getElementById('industry').value,
        location: document.getElementById('location').value,
        gstNumber: document.getElementById('gstNumber').value,
        plan: document.querySelector('input[name="plan"]:checked').value
      };
      
      // Send registration request
      fetch('/api/auth/register', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(userData)
      })
      .then(response => response.json())
      .then(data => {
        if (data.user) {
          // Registration successful
          alert('Registration successful! Redirecting to dashboard...');
          window.location.href = 'dashboard.html';
        } else {
          // Registration failed
          alert('Registration failed: ' + (data.error || 'Please try again'));
        }
      })
      .catch(error => {
        alert('An error occurred: ' + error.message);
      });
    }
  </script>
</body>
</html>