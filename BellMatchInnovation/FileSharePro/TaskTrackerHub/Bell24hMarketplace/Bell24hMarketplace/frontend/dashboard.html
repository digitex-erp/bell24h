<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bell24h Dashboard - AI-Powered RFQ Marketplace</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/bell24h-styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Sound notifications preload -->
    <audio id="notification-sound" preload="auto">
        <source src="https://cdn.pixabay.com/download/audio/2022/01/18/audio_8a30a97b67.mp3?filename=notification-sound-7062.mp3" type="audio/mpeg">
    </audio>
    <style>
        .supplier-tag {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body class="font-sans antialiased text-gray-800 bg-gray-100">
    <div class="flex">
        <!-- Sidebar -->
        <aside class="sidebar bg-gray-800 text-white h-screen sticky top-0 overflow-y-auto">
            <div class="p-5 border-b border-gray-700">
                <div class="flex items-center">
                    <span class="text-2xl font-bold">
                        <span class="text-blue-400">Bell</span>24h
                    </span>
                    <button id="toggleSidebar" class="ml-auto text-gray-400 hover:text-white focus:outline-none hidden md:block">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="p-5">
                <nav>
                    <div class="space-y-2">
                        <a href="#" class="sidebar-item flex items-center p-3 text-blue-400 bg-gray-700 rounded-lg">
                            <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                            </svg>
                            <span>Dashboard</span>
                        </a>
                        <a href="#" class="sidebar-item flex items-center p-3 text-gray-300 hover:bg-gray-700 rounded-lg transition">
                            <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                            </svg>
                            <span>My RFQs</span>
                        </a>
                        <a href="#" class="sidebar-item flex items-center p-3 text-gray-300 hover:bg-gray-700 rounded-lg transition relative">
                            <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0018 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                            </svg>
                            <span>Notifications</span>
                            <span class="notification-badge">3</span>
                        </a>
                        <a href="#" class="sidebar-item flex items-center p-3 text-gray-300 hover:bg-gray-700 rounded-lg transition">
                            <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"></path>
                            </svg>
                            <span>Messages</span>
                        </a>
                        <a href="#" class="sidebar-item flex items-center p-3 text-gray-300 hover:bg-gray-700 rounded-lg transition">
                            <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span>Wallet</span>
                        </a>
                        <a href="#" class="sidebar-item flex items-center p-3 text-gray-300 hover:bg-gray-700 rounded-lg transition">
                            <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            <span>Profile</span>
                        </a>
                    </div>
                </nav>
                <hr class="my-6 border-gray-700">
                <div class="space-y-2">
                    <a href="#" class="sidebar-item flex items-center p-3 text-gray-300 hover:bg-gray-700 rounded-lg transition">
                        <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                        <span>Settings</span>
                    </a>
                    <a href="#" class="sidebar-item flex items-center p-3 text-gray-300 hover:bg-red-600 rounded-lg transition">
                        <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                        </svg>
                        <span>Logout</span>
                    </a>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content flex-1 overflow-x-hidden">
            <!-- Navbar -->
            <nav class="bg-white shadow-md sticky top-0 z-10">
                <div class="max-w-full mx-auto px-6">
                    <div class="flex justify-between items-center h-16">
                        <div class="flex">
                            <button id="mobileMenuButton" class="mr-2 md:hidden text-gray-500 hover:text-gray-700 focus:outline-none">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                </svg>
                            </button>
                            <h1 class="text-xl font-semibold">Dashboard</h1>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div class="relative">
                                <input type="text" placeholder="Search..." class="w-64 pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <div class="absolute left-3 top-2.5 text-gray-400">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="relative">
                                <button id="notification-btn" class="relative p-1 text-gray-400 hover:text-gray-600 focus:outline-none">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0018 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                                    </svg>
                                    <span id="notification-count" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-500 rounded-full">3</span>
                                </button>
                                
                                <!-- Notification Dropdown -->
                                <div id="notification-dropdown" class="absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg overflow-hidden z-20 hidden">
                                    <div class="py-2 px-3 bg-gray-100 border-b border-gray-200 flex justify-between items-center">
                                        <span class="font-semibold text-gray-800">Notifications</span>
                                        <div>
                                            <button id="notification-sound-toggle" class="text-sm text-blue-600 hover:text-blue-800 mr-2">
                                                <span id="sound-on-icon"><i class="fas fa-volume-up"></i></span>
                                                <span id="sound-off-icon" class="hidden"><i class="fas fa-volume-mute"></i></span>
                                            </button>
                                            <button id="mark-all-read" class="text-sm text-blue-600 hover:text-blue-800">
                                                Mark all as read
                                            </button>
                                        </div>
                                    </div>
                                    <div id="notification-list" class="max-h-80 overflow-y-auto">
                                        <div class="py-2 px-4 bg-blue-50 hover:bg-blue-100 border-l-4 border-blue-500">
                                            <div class="flex justify-between items-start">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900">New bid on your RFQ</p>
                                                    <p class="text-xs text-gray-600 mt-1">Supplier XYZ has placed a bid on your RFQ for industrial machinery.</p>
                                                </div>
                                                <span class="text-xs text-gray-500">5 min ago</span>
                                            </div>
                                        </div>
                                        <div class="py-2 px-4 hover:bg-gray-50 border-l-4 border-transparent">
                                            <div class="flex justify-between items-start">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-700">RFQ deadline approaching</p>
                                                    <p class="text-xs text-gray-600 mt-1">Your RFQ for electrical components will close in 24 hours.</p>
                                                </div>
                                                <span class="text-xs text-gray-500">2 hours ago</span>
                                            </div>
                                        </div>
                                        <div class="py-2 px-4 hover:bg-gray-50 border-l-4 border-transparent">
                                            <div class="flex justify-between items-start">
                                                <div>
                                                    <p class="text-sm font-medium text-gray-700">Supplier verification complete</p>
                                                    <p class="text-xs text-gray-600 mt-1">ABC Supplies has completed GST verification successfully.</p>
                                                </div>
                                                <span class="text-xs text-gray-500">Yesterday</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="py-2 text-center border-t border-gray-200">
                                        <a href="#" class="text-sm text-blue-600 hover:text-blue-800">View all notifications</a>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <img class="h-8 w-8 rounded-full" src="https://randomuser.me/api/portraits/men/32.jpg" alt="User avatar">
                                <span class="ml-2 font-medium text-gray-800">Rajiv Kumar</span>
                                <svg class="w-4 h-4 ml-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- Dashboard Content -->
            <div class="p-6">
                <!-- Summary Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                    <div class="bg-white rounded-lg shadow-md p-6 card">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500 mb-1">Active RFQs</p>
                                <h3 class="text-2xl font-bold">8</h3>
                                <p class="text-xs text-green-500 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>
                                    <span>12% from last month</span>
                                </p>
                            </div>
                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6 card">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500 mb-1">Total Bids Received</p>
                                <h3 class="text-2xl font-bold">37</h3>
                                <p class="text-xs text-green-500 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>
                                    <span>8% from last month</span>
                                </p>
                            </div>
                            <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6 card">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500 mb-1">Avg. Match Score</p>
                                <h3 class="text-2xl font-bold">87%</h3>
                                <p class="text-xs text-green-500 mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>
                                    <span>5% from last month</span>
                                </p>
                            </div>
                            <div class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center">
                                <svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6 card">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500 mb-1">Wallet Balance</p>
                                <h3 class="text-2xl font-bold">₹25,640</h3>
                                <p class="text-xs text-red-500 mt-1">
                                    <i class="fas fa-arrow-down mr-1"></i>
                                    <span>3% from last month</span>
                                </p>
                            </div>
                            <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
                                <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Matching Section -->
                <div class="mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">AI-Powered RFQ Matching</h2>
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition flex items-center">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            Create New RFQ
                        </button>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow-md overflow-hidden pulse">
                        <div class="p-6 gradient-bg text-white">
                            <div class="flex flex-col md:flex-row justify-between">
                                <div>
                                    <h3 class="text-xl font-bold mb-2">Manufacturing Components RFQ #RFQ-2025-0142</h3>
                                    <p class="text-blue-100">5 days remaining • Posted: March 27, 2025</p>
                                </div>
                                <div class="mt-4 md:mt-0">
                                    <span class="bg-white text-blue-600 px-3 py-1 rounded-full font-medium text-sm">
                                        17 Bids Received
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                <div class="lg:col-span-2">
                                    <h4 class="text-lg font-semibold mb-4">Top AI-Matched Suppliers</h4>
                                    
                                    <!-- Supplier 1 -->
                                    <div class="mb-6 bg-gray-50 p-4 rounded-lg border-l-4 border-green-500">
                                        <div class="flex justify-between items-start mb-4">
                                            <div class="flex">
                                                <img src="https://randomuser.me/api/portraits/men/45.jpg" alt="Supplier" class="w-12 h-12 rounded-full border-2 border-green-500">
                                                <div class="ml-4">
                                                    <h5 class="font-semibold text-gray-900">Reliable Manufacturing Pvt Ltd</h5>
                                                    <div class="flex items-center text-sm text-gray-600">
                                                        <svg class="w-4 h-4 text-green-500 mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                            <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                                        </svg>
                                                        <span>GST Verified</span>
                                                        <span class="mx-2">•</span>
                                                        <span>Delhi, India</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-xl font-bold text-green-600">93% Match</div>
                                                <div class="text-sm text-gray-500">Bid: ₹82,500</div>
                                            </div>
                                        </div>
                                        
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div>
                                                <h6 class="text-sm font-semibold mb-2 text-gray-700">Match Factors</h6>
                                                <div class="space-y-2">
                                                    <div class="tooltip">
                                                        <div>
                                                            <div class="flex justify-between items-center text-xs mb-1">
                                                                <span>Price Competitiveness</span>
                                                                <span class="font-medium">92%</span>
                                                            </div>
                                                            <div class="progress-bar">
                                                                <div class="progress-value" style="width: 92%; background-color: #22c55e;"></div>
                                                            </div>
                                                        </div>
                                                        <span class="tooltip-text">Based on comparison with market rates and your budget constraints of ₹85,000</span>
                                                    </div>
                                                    
                                                    <div class="tooltip">
                                                        <div>
                                                            <div class="flex justify-between items-center text-xs mb-1">
                                                                <span>Delivery Timeline</span>
                                                                <span class="font-medium">95%</span>
                                                            </div>
                                                            <div class="progress-bar">
                                                                <div class="progress-value" style="width: 95%; background-color: #22c55e;"></div>
                                                            </div>
                                                        </div>
                                                        <span class="tooltip-text">Proposed delivery time of 12 days matches your requirements of 15 days</span>
                                                    </div>
                                                    
                                                    <div class="tooltip">
                                                        <div>
                                                            <div class="flex justify-between items-center text-xs mb-1">
                                                                <span>Quality Rating</span>
                                                                <span class="font-medium">90%</span>
                                                            </div>
                                                            <div class="progress-bar">
                                                                <div class="progress-value" style="width: 90%; background-color: #22c55e;"></div>
                                                            </div>
                                                        </div>
                                                        <span class="tooltip-text">Based on previous customer reviews and quality certifications</span>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div>
                                                <h6 class="text-sm font-semibold mb-2 text-gray-700">AI Explanation</h6>
                                                <div class="text-sm text-gray-600 bg-blue-50 p-3 rounded-lg border border-blue-100">
                                                    <p>This supplier is highly recommended because:</p>
                                                    <ul class="list-disc pl-5 mt-1 space-y-1">
                                                        <li>Specialist in precision manufacturing components</li>
                                                        <li>Past performance shows 98% on-time delivery rate</li>
                                                        <li>Has previously worked with similar specifications</li>
                                                        <li>Competitive pricing within your budget constraints</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-4 flex justify-end space-x-3">
                                            <button class="px-4 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-gray-100 transition">
                                                Message Supplier
                                            </button>
                                            <button class="px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 transition">
                                                Accept Bid
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Supplier 2 -->
                                    <div class="mb-6 bg-gray-50 p-4 rounded-lg border-l-4 border-blue-500">
                                        <div class="flex justify-between items-start mb-4">
                                            <div class="flex">
                                                <img src="https://randomuser.me/api/portraits/women/45.jpg" alt="Supplier" class="w-12 h-12 rounded-full border-2 border-blue-500">
                                                <div class="ml-4">
                                                    <h5 class="font-semibold text-gray-900">Precision Engineering Works</h5>
                                                    <div class="flex items-center text-sm text-gray-600">
                                                        <svg class="w-4 h-4 text-green-500 mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                            <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                                        </svg>
                                                        <span>GST Verified</span>
                                                        <span class="mx-2">•</span>
                                                        <span>Mumbai, India</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-xl font-bold text-blue-600">87% Match</div>
                                                <div class="text-sm text-gray-500">Bid: ₹78,900</div>
                                            </div>
                                        </div>
                                        
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div>
                                                <h6 class="text-sm font-semibold mb-2 text-gray-700">Match Factors</h6>
                                                <div class="space-y-2">
                                                    <div class="tooltip">
                                                        <div>
                                                            <div class="flex justify-between items-center text-xs mb-1">
                                                                <span>Price Competitiveness</span>
                                                                <span class="font-medium">94%</span>
                                                            </div>
                                                            <div class="progress-bar">
                                                                <div class="progress-value" style="width: 94%; background-color: #22c55e;"></div>
                                                            </div>
                                                        </div>
                                                        <span class="tooltip-text">Lower price than expected, representing good value for money based on your budget of ₹85,000</span>
                                                    </div>
                                                    
                                                    <div class="tooltip">
                                                        <div>
                                                            <div class="flex justify-between items-center text-xs mb-1">
                                                                <span>Delivery Timeline</span>
                                                                <span class="font-medium">82%</span>
                                                            </div>
                                                            <div class="progress-bar">
                                                                <div class="progress-value" style="width: 82%; background-color: #3b82f6;"></div>
                                                            </div>
                                                        </div>
                                                        <span class="tooltip-text">Proposed delivery time of 14 days is within your requirement of 15 days</span>
                                                    </div>
                                                    
                                                    <div class="tooltip">
                                                        <div>
                                                            <div class="flex justify-between items-center text-xs mb-1">
                                                                <span>Quality Rating</span>
                                                                <span class="font-medium">85%</span>
                                                            </div>
                                                            <div class="progress-bar">
                                                                <div class="progress-value" style="width: 85%; background-color: #3b82f6;"></div>
                                                            </div>
                                                        </div>
                                                        <span class="tooltip-text">Based on previous customer reviews and quality certifications</span>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div>
                                                <h6 class="text-sm font-semibold mb-2 text-gray-700">AI Explanation</h6>
                                                <div class="text-sm text-gray-600 bg-blue-50 p-3 rounded-lg border border-blue-100">
                                                    <p>This supplier is recommended because:</p>
                                                    <ul class="list-disc pl-5 mt-1 space-y-1">
                                                        <li>Offers the most competitive pricing among all bidders</li>
                                                        <li>Has specialized equipment for precision manufacturing</li>
                                                        <li>Rating slightly lower due to less experience with your specific component type</li>
                                                        <li>Recently improved quality control processes</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-4 flex justify-end space-x-3">
                                            <button class="px-4 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-gray-100 transition">
                                                Message Supplier
                                            </button>
                                            <button class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition">
                                                Accept Bid
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- View More Button -->
                                    <div class="text-center mt-6">
                                        <button class="px-4 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-gray-100 transition">
                                            View All 17 Bids
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Matching Insights -->
                                <div>
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <h4 class="text-lg font-semibold mb-4">AI Matching Insights</h4>
                                        
                                        <div class="mb-4">
                                            <h6 class="text-sm font-semibold mb-2 text-gray-700">Match Score Distribution</h6>
                                            <canvas id="matchScoreChart" height="200"></canvas>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <h6 class="text-sm font-semibold mb-2 text-gray-700">Key Decision Factors</h6>
                                            <canvas id="decisionFactorsChart" height="200"></canvas>
                                        </div>
                                        
                                        <div class="mt-6">
                                            <h6 class="text-sm font-semibold mb-2 text-gray-700">AI Recommendations</h6>
                                            <div class="text-sm text-gray-600 space-y-2">
                                                <div class="flex items-start">
                                                    <svg class="w-4 h-4 text-blue-500 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>
                                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd"></path>
                                                    </svg>
                                                    <span>Consider Reliable Manufacturing for their consistent quality track record</span>
                                                </div>
                                                <div class="flex items-start">
                                                    <svg class="w-4 h-4 text-blue-500 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>
                                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd"></path>
                                                    </svg>
                                                    <span>Precision Engineering offers better value for money if budget is a concern</span>
                                                </div>
                                                <div class="flex items-start">
                                                    <svg class="w-4 h-4 text-blue-500 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>
                                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd"></path>
                                                    </svg>
                                                    <span>Request material quality certificates before finalizing</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-6">
                                            <button class="w-full px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700 transition flex items-center justify-center">
                                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path>
                                                </svg>
                                                Download Full AI Analysis
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RFQ Activity & Stats -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <!-- Recent RFQs -->
                    <div class="lg:col-span-2">
                        <div class="bg-white rounded-lg shadow-md overflow-hidden">
                            <div class="p-6 border-b border-gray-200">
                                <h3 class="text-lg font-semibold">Recent RFQs</h3>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="min-w-full">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">RFQ ID</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Bids</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Posted</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-gray-200">
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">RFQ-2025-0142</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Manufacturing Components</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">17</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Active</span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Mar 27, 2025</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                <button class="text-blue-600 hover:text-blue-900">View</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">RFQ-2025-0137</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Electrical Transformers</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">8</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Awarded</span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Mar 22, 2025</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                <button class="text-blue-600 hover:text-blue-900">View</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">RFQ-2025-0129</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Industrial Sensors</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">12</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Awarded</span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Mar 18, 2025</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                <button class="text-blue-600 hover:text-blue-900">View</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">RFQ-2025-0121</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">PCB Assembly</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">6</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">Completed</span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Mar 12, 2025</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                <button class="text-blue-600 hover:text-blue-900">View</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Top Categories -->
                    <div>
                        <div class="bg-white rounded-lg shadow-md overflow-hidden h-full">
                            <div class="p-6 border-b border-gray-200">
                                <h3 class="text-lg font-semibold">Top RFQ Categories</h3>
                            </div>
                            <div class="p-6">
                                <canvas id="categoryChart" height="240"></canvas>
                                
                                <div class="mt-6">
                                    <h4 class="text-sm font-semibold mb-3 text-gray-700">Category AI Insights</h4>
                                    <div class="space-y-3 text-sm">
                                        <div class="flex items-start">
                                            <svg class="w-4 h-4 text-blue-500 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                            </svg>
                                            <span class="text-gray-600">Manufacturing Components showing 28% higher supplier interest than last quarter</span>
                                        </div>
                                        <div class="flex items-start">
                                            <svg class="w-4 h-4 text-blue-500 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                            </svg>
                                            <span class="text-gray-600">Electronics suppliers offering 5-8% better pricing than last year</span>
                                        </div>
                                        <div class="flex items-start">
                                            <svg class="w-4 h-4 text-blue-500 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                            </svg>
                                            <span class="text-gray-600">Industrial Chemicals category showing supply constraints</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Toggle sidebar
        document.getElementById('toggleSidebar').addEventListener('click', function() {
            const sidebar = document.querySelector('.sidebar');
            const mainContent = document.querySelector('.main-content');
            
            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('expanded');
            
            // Hide/show text in sidebar items
            const sidebarItems = document.querySelectorAll('.sidebar-item');
            sidebarItems.forEach(item => {
                if (sidebar.classList.contains('collapsed')) {
                    item.querySelector('span').style.display = 'none';
                } else {
                    item.querySelector('span').style.display = 'inline';
                }
            });
        });
        
        // Mobile menu
        document.getElementById('mobileMenuButton').addEventListener('click', function() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('hidden');
        });
        
        // Charts
        document.addEventListener('DOMContentLoaded', function() {
            // Match Score Distribution Chart
            const matchScoreCtx = document.getElementById('matchScoreChart').getContext('2d');
            const matchScoreChart = new Chart(matchScoreCtx, {
                type: 'bar',
                data: {
                    labels: ['90-100%', '80-89%', '70-79%', '60-69%', '<60%'],
                    datasets: [{
                        label: 'Number of Suppliers',
                        data: [2, 5, 7, 2, 1],
                        backgroundColor: [
                            'rgba(34, 197, 94, 0.7)',
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(168, 85, 247, 0.7)',
                            'rgba(251, 191, 36, 0.7)',
                            'rgba(239, 68, 68, 0.7)'
                        ],
                        borderColor: [
                            'rgb(34, 197, 94)',
                            'rgb(59, 130, 246)',
                            'rgb(168, 85, 247)',
                            'rgb(251, 191, 36)',
                            'rgb(239, 68, 68)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                precision: 0
                            }
                        }
                    }
                }
            });
            
            // Decision Factors Chart
            const decisionFactorsCtx = document.getElementById('decisionFactorsChart').getContext('2d');
            const decisionFactorsChart = new Chart(decisionFactorsCtx, {
                type: 'radar',
                data: {
                    labels: [
                        'Price',
                        'Quality',
                        'Delivery Time',
                        'Experience',
                        'Reliability'
                    ],
                    datasets: [{
                        label: 'Reliable Manufacturing',
                        data: [85, 90, 95, 88, 92],
                        fill: true,
                        backgroundColor: 'rgba(34, 197, 94, 0.2)',
                        borderColor: 'rgb(34, 197, 94)',
                        pointBackgroundColor: 'rgb(34, 197, 94)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(34, 197, 94)'
                    }, {
                        label: 'Precision Engineering',
                        data: [94, 85, 82, 81, 87],
                        fill: true,
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderColor: 'rgb(59, 130, 246)',
                        pointBackgroundColor: 'rgb(59, 130, 246)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(59, 130, 246)'
                    }]
                },
                options: {
                    elements: {
                        line: {
                            borderWidth: 2
                        }
                    },
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 50,
                            suggestedMax: 100
                        }
                    }
                }
            });
            
            // Category Chart
            const categoryCtx = document.getElementById('categoryChart').getContext('2d');
            const categoryChart = new Chart(categoryCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Manufacturing', 'Electronics', 'Industrial Chemicals', 'Hardware', 'Others'],
                    datasets: [{
                        data: [35, 25, 15, 15, 10],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(16, 185, 129, 0.7)',
                            'rgba(251, 191, 36, 0.7)',
                            'rgba(139, 92, 246, 0.7)',
                            'rgba(107, 114, 128, 0.7)'
                        ],
                        borderColor: [
                            'rgb(59, 130, 246)',
                            'rgb(16, 185, 129)',
                            'rgb(251, 191, 36)',
                            'rgb(139, 92, 246)',
                            'rgb(107, 114, 128)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                usePointStyle: true
                            }
                        }
                    }
                }
            });
        });
    </script>

    <!-- Notification System with Sound Alerts -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const notificationBtn = document.getElementById('notification-btn');
            const notificationDropdown = document.getElementById('notification-dropdown');
            const notificationCount = document.getElementById('notification-count');
            const notificationList = document.getElementById('notification-list');
            const markAllReadBtn = document.getElementById('mark-all-read');
            const notificationSound = document.getElementById('notification-sound');
            const notificationSoundToggle = document.getElementById('notification-sound-toggle');
            const soundOnIcon = document.getElementById('sound-on-icon');
            const soundOffIcon = document.getElementById('sound-off-icon');
            
            // Sound notification settings
            let soundEnabled = true; // Default sound is enabled
            
            // Toggle notification dropdown
            notificationBtn.addEventListener('click', function(e) {
                e.preventDefault();
                notificationDropdown.classList.toggle('hidden');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!notificationBtn.contains(e.target) && !notificationDropdown.contains(e.target)) {
                    notificationDropdown.classList.add('hidden');
                }
            });
            
            // Toggle sound notifications
            notificationSoundToggle.addEventListener('click', function() {
                soundEnabled = !soundEnabled;
                if (soundEnabled) {
                    soundOnIcon.classList.remove('hidden');
                    soundOffIcon.classList.add('hidden');
                } else {
                    soundOnIcon.classList.add('hidden');
                    soundOffIcon.classList.remove('hidden');
                }
                
                // Save preference to localStorage
                localStorage.setItem('bell24h_notification_sound', soundEnabled);
            });
            
            // Mark all notifications as read
            markAllReadBtn.addEventListener('click', function() {
                const unreadNotifications = notificationList.querySelectorAll('.bg-blue-50');
                unreadNotifications.forEach(notification => {
                    notification.classList.remove('bg-blue-50', 'border-blue-500');
                    notification.classList.add('border-transparent');
                });
                
                // Update notification count
                notificationCount.textContent = '0';
                
                // Hide count when zero
                if (notificationCount.textContent === '0') {
                    notificationCount.classList.add('hidden');
                }
            });
            
            // Load saved sound preference
            function loadSoundPreference() {
                const savedPreference = localStorage.getItem('bell24h_notification_sound');
                if (savedPreference !== null) {
                    soundEnabled = savedPreference === 'true';
                    if (!soundEnabled) {
                        soundOnIcon.classList.add('hidden');
                        soundOffIcon.classList.remove('hidden');
                    }
                }
            }
            
            // Function to add a new notification
            function addNotification(notification) {
                // Create notification element
                const notificationElement = document.createElement('div');
                notificationElement.className = 'py-2 px-4 bg-blue-50 hover:bg-blue-100 border-l-4 border-blue-500';
                
                notificationElement.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-sm font-medium text-gray-900">${notification.title}</p>
                            <p class="text-xs text-gray-600 mt-1">${notification.message}</p>
                        </div>
                        <span class="text-xs text-gray-500">Just now</span>
                    </div>
                `;
                
                // Add to notification list (at the top)
                notificationList.insertBefore(notificationElement, notificationList.firstChild);
                
                // Update notification count
                const currentCount = parseInt(notificationCount.textContent);
                notificationCount.textContent = currentCount + 1;
                notificationCount.classList.remove('hidden');
                
                // Play sound if enabled
                if (soundEnabled) {
                    notificationSound.play().catch(err => {
                        console.error("Error playing notification sound:", err);
                    });
                }
            }
            
            // Simulate receiving a new notification (for demo purposes)
            function simulateNewNotification() {
                const demoNotifications = [
                    {
                        title: 'New quote request received',
                        message: 'You have received a new RFQ for industrial supplies'
                    },
                    {
                        title: 'Bid accepted',
                        message: 'Your bid for project #RFQ-2025-0138 has been accepted'
                    },
                    {
                        title: 'Payment received',
                        message: 'Payment of ₹45,000 has been credited to your account'
                    },
                    {
                        title: 'New message',
                        message: 'You have a new message from a supplier regarding your order'
                    }
                ];
                
                // Select a random notification
                const randomIndex = Math.floor(Math.random() * demoNotifications.length);
                addNotification(demoNotifications[randomIndex]);
            }
            
            // Initialize
            loadSoundPreference();
            
            // For demo: Simulate notifications every 30 seconds
            setTimeout(simulateNewNotification, 10000);
            setInterval(simulateNewNotification, 30000);
            
            // HTTP polling for notifications
            let isPolling = false;
            let pollingInterval = null;
            let lastNotificationId = null;
            
            // Start notification polling
            function startPolling() {
                if (isPolling) return;
                
                isPolling = true;
                checkForNewNotifications(); // Check immediately
                pollingInterval = setInterval(checkForNewNotifications, 5000); // Poll every 5 seconds
                console.log('Started notification polling');
            }
            
            // Stop notification polling
            function stopPolling() {
                if (!isPolling) return;
                
                clearInterval(pollingInterval);
                isPolling = false;
                console.log('Stopped notification polling');
            }
            
            // Check for new notifications using HTTP polling
            function checkForNewNotifications() {
                fetch('//localhost:5000/notifications')
                    .then(response => response.json())
                    .then(data => {
                        // Handle notification messages
                        if (data.type === 'notification') {
                            // Check if this is a new notification to avoid duplicates
                            if (!lastNotificationId || lastNotificationId !== data.id) {
                                lastNotificationId = data.id;
                                addNotification({
                                    title: data.title || 'New notification',
                                    message: data.message || 'You have a new notification'
                                });
                            }
                        }
                    })
                    .catch(error => {
                        console.error('Error polling for notifications:', error);
                    });
            }
            
            // Load initial notification list
            function loadInitialNotifications() {
                fetch('//localhost:5000/notifications/recent')
                    .then(response => response.json())
                    .then(data => {
                        if (data.type === 'notification_list' && data.notifications && data.notifications.length) {
                            // Clear existing notifications in UI
                            notificationList.innerHTML = '';
                            
                            // Store most recent notification ID
                            if (data.notifications.length > 0) {
                                lastNotificationId = data.notifications[0].id;
                            }
                            
                            // Only show the top 5 notifications in the dropdown
                            const topNotifications = data.notifications.slice(0, 5);
                            
                            // Add each notification to the list
                            topNotifications.forEach((notification, index) => {
                                const isUnread = index === 0; // Mark only the most recent as unread
                                
                                const notificationElement = document.createElement('div');
                                notificationElement.className = isUnread 
                                    ? 'py-2 px-4 bg-blue-50 hover:bg-blue-100 border-l-4 border-blue-500'
                                    : 'py-2 px-4 hover:bg-gray-50 border-l-4 border-transparent';
                                
                                const timeAgo = getTimeAgo(new Date(notification.timestamp));
                                
                                notificationElement.innerHTML = `
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <p class="text-sm font-medium ${isUnread ? 'text-gray-900' : 'text-gray-700'}">${notification.title}</p>
                                            <p class="text-xs text-gray-600 mt-1">${notification.message}</p>
                                        </div>
                                        <span class="text-xs text-gray-500">${timeAgo}</span>
                                    </div>
                                `;
                                
                                notificationList.appendChild(notificationElement);
                            });
                            
                            // Update notification count
                            updateNotificationCount(topNotifications.length);
                        }
                    })
                    .catch(error => {
                        console.error('Error loading initial notifications:', error);
                    });
            }
            
            // Helper function to format timestamps
            function getTimeAgo(date) {
                const now = new Date();
                const seconds = Math.floor((now - date) / 1000);
                
                if (seconds < 60) return 'Just now';
                
                const minutes = Math.floor(seconds / 60);
                if (minutes < 60) return `${minutes} min ago`;
                
                const hours = Math.floor(minutes / 60);
                if (hours < 24) return `${hours} hours ago`;
                
                const days = Math.floor(hours / 24);
                if (days === 1) return 'Yesterday';
                
                return `${days} days ago`;
            }
            
            // Update notification count
            function updateNotificationCount(count) {
                notificationCount.textContent = count.toString();
                if (count === 0) {
                    notificationCount.classList.add('hidden');
                } else {
                    notificationCount.classList.remove('hidden');
                }
            }
            
            // Demo: Create a test notification
            function createTestNotification() {
                fetch('//localhost:5000/notifications/create-demo')
                    .then(response => response.json())
                    .then(data => {
                        console.log('Created test notification', data);
                    })
                    .catch(error => {
                        console.error('Error creating test notification:', error);
                    });
            }
            
            // Initialize
            loadInitialNotifications();
            startPolling();
        });
    </script>
</body>
</html>