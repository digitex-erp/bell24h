<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bell24h RFQ Matching System</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-light: #3b82f6;
            --primary-light-transparent: rgba(59, 130, 246, 0.1);
            --primary-dark: #1e40af;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --neutral-color: #6b7280;
            --background-color: #f9fafb;
            --card-background: #ffffff;
            --text-color: #1f2937;
            --text-light: #6b7280;
            --border-color: #e5e7eb;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 0;
            box-shadow: var(--shadow);
        }

        header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-weight: bold;
            font-size: 1.5rem;
            letter-spacing: 0.5px;
        }

        main {
            padding: 2rem 0;
        }

        h2 {
            color: var(--primary-dark);
            margin-top: 0;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
            font-weight: 600;
        }

        .card {
            background-color: var(--card-background);
            border-radius: 0.75rem;
            box-shadow: var(--shadow);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .card h3 {
            margin-top: 0;
            color: var(--primary-color);
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-color);
        }

        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
            color: var(--text-color);
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-light);
            box-shadow: 0 0 0 3px var(--primary-light-transparent);
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
        }

        button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-1px);
        }

        button:active {
            transform: translateY(0);
        }

        .button-row {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .btn-secondary {
            background-color: var(--text-light);
        }

        .btn-secondary:hover {
            background-color: #4b5563;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .supplier-card {
            background-color: var(--card-background);
            border-radius: 0.75rem;
            box-shadow: var(--shadow);
            padding: 1.5rem;
            position: relative;
            transition: transform 0.3s, box-shadow 0.3s;
            border-left: 4px solid var(--primary-color);
        }

        .supplier-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .match-score {
            position: absolute;
            top: 1.25rem;
            right: 1.25rem;
            background-color: var(--primary-color);
            color: white;
            padding: 0.5rem 0.75rem;
            border-radius: 9999px;
            font-weight: bold;
            letter-spacing: 0.5px;
            font-size: 0.875rem;
        }

        .supplier-info {
            margin-bottom: 1.25rem;
        }

        .supplier-info h3 {
            margin: 0;
            color: var(--primary-dark);
            font-size: 1.25rem;
        }

        .supplier-info p {
            margin: 0.25rem 0;
            color: var(--text-light);
        }

        .metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
            margin-bottom: 1.25rem;
        }

        .metric {
            background-color: #f3f4f6;
            padding: 0.75rem;
            border-radius: 0.5rem;
            display: flex;
            flex-direction: column;
        }

        .metric-label {
            font-size: 0.75rem;
            color: var(--text-light);
            margin-bottom: 0.25rem;
        }

        .metric-value {
            font-weight: bold;
            color: var(--primary-color);
            font-size: 1.125rem;
        }

        .explanation-title {
            margin-bottom: 0.75rem;
            font-weight: 600;
            color: var(--primary-dark);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .explanations {
            margin-top: 1.25rem;
        }

        .explanation {
            display: flex;
            margin-bottom: 0.75rem;
            align-items: center;
        }

        .explanation-name {
            width: 120px;
            font-size: 0.875rem;
        }

        .bar-container {
            flex-grow: 1;
            height: 10px;
            background-color: #f3f4f6;
            margin: 0 0.75rem;
            position: relative;
            overflow: hidden;
            border-radius: 9999px;
        }

        .bar {
            height: 100%;
            position: absolute;
            left: 50%;
            top: 0;
        }

        .bar.positive {
            background-color: var(--success-color);
        }

        .bar.negative {
            background-color: var(--danger-color);
            transform: translateX(-100%);
        }

        .explanation-text {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-top: 0.25rem;
            margin-left: 120px;
            margin-bottom: 0.75rem;
        }

        .explanation-value {
            font-weight: 600;
            width: 50px;
            text-align: center;
            font-size: 0.875rem;
        }

        .positive-value {
            color: var(--success-color);
        }

        .negative-value {
            color: var(--danger-color);
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 3rem;
            flex-direction: column;
        }

        .spinner {
            border: 3px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 3px solid var(--primary-color);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Stats section */
        .stats-section {
            background-color: var(--primary-color);
            padding: 0;
            color: white;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-box {
            padding: 1.5rem;
            text-align: center;
            transition: background-color 0.3s;
        }

        .stat-box:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .stat-box:not(:last-child) {
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-title {
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: bold;
            letter-spacing: 0.5px;
        }

        /* Features section */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .feature-card {
            background-color: var(--card-background);
            border-radius: 0.75rem;
            box-shadow: var(--shadow);
            padding: 1.5rem;
            transition: transform 0.3s, box-shadow 0.3s;
            border-top: 4px solid var(--primary-color);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .feature-icon {
            width: 50px;
            height: 50px;
            background-color: var(--primary-light-transparent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            color: var(--primary-color);
            font-size: 1.5rem;
        }

        .feature-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
        }

        /* Section divider */
        .section-divider {
            margin: 3rem 0;
            border-top: 1px solid var(--border-color);
            position: relative;
        }

        .section-divider h2 {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--background-color);
            padding: 0 1rem;
            margin: 0;
            border-bottom: none;
            font-size: 1.25rem;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .grid, .stats-container, .features-grid {
                grid-template-columns: 1fr;
            }

            .stat-box:not(:last-child) {
                border-right: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .explanation-name {
                width: 100px;
            }

            .explanation-text {
                margin-left: 100px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">Bell24h.com</div>
            <div>AI-Powered RFQ Platform</div>
        </div>
    </header>
    
    <div class="stats-section">
        <div class="container">
            <div class="stats-container">
                <div class="stat-box">
                    <div class="stat-title">Uptime Reliability</div>
                    <div class="stat-value">99.9%</div>
                </div>
                <div class="stat-box">
                    <div class="stat-title">Average Response Time</div>
                    <div class="stat-value">0.8s</div>
                </div>
                <div class="stat-box">
                    <div class="stat-title">Messages Processed Daily</div>
                    <div class="stat-value">10,000+</div>
                </div>
            </div>
        </div>
    </div>

    <main class="container">
        <div class="card">
            <h2>Welcome to Bell24h RFQ Matching System</h2>
            <p>Our AI-powered RFQ matching system connects businesses with the most suitable suppliers across India, ensuring optimal matches based on multiple factors.</p>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">&#128300;</div>
                    <div class="feature-title">AI-Powered Matching</div>
                    <p>Our advanced algorithms analyze multiple factors to find the perfect supplier match for your requirements.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">&#128161;</div>
                    <div class="feature-title">Explainable AI</div>
                    <p>Transparent decision-making with SHAP value explanations for every supplier recommendation.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">&#128274;</div>
                    <div class="feature-title">GST Verified</div>
                    <p>All suppliers go through GST verification ensuring compliance with Indian taxation laws.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">&#128172;</div>
                    <div class="feature-title">Real-time Communication</div>
                    <p>Connect instantly with suppliers through our secure real-time messaging system.</p>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2>Request for Quote (RFQ) Details</h2>
            <p>Enter your RFQ details below to find the best matching suppliers using our AI matching engine.</p>
            
            <form id="rfqForm">
                <div class="form-group">
                    <label for="title">RFQ Title</label>
                    <input type="text" id="title" name="title" required placeholder="e.g., PCB Manufacturing for IoT Devices">
                </div>
                
                <div class="form-group">
                    <label for="category">Category</label>
                    <select id="category" name="category" required>
                        <option value="">Select a category</option>
                        <option value="Electronics Manufacturing">Electronics Manufacturing</option>
                        <option value="Industrial Equipment">Industrial Equipment</option>
                        <option value="Mechanical Parts">Mechanical Parts</option>
                        <option value="Plastic Goods">Plastic Goods</option>
                        <option value="Textile Production">Textile Production</option>
                        <option value="Chemical Processing">Chemical Processing</option>
                        <option value="Food Processing">Food Processing</option>
                        <option value="Metal Fabrication">Metal Fabrication</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" name="description" required placeholder="Provide detailed specifications of your requirements..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="quantity">Quantity</label>
                    <input type="number" id="quantity" name="quantity" required min="1" placeholder="e.g., 100">
                </div>
                
                <div class="form-group">
                    <label for="budget">Budget (₹)</label>
                    <input type="number" id="budget" name="budget" required min="1" placeholder="e.g., 50000">
                </div>
                
                <div class="form-group">
                    <label for="delivery_days">Required Delivery Days</label>
                    <input type="number" id="delivery_days" name="delivery_days" required min="1" placeholder="e.g., 15">
                </div>
                
                <div class="form-group">
                    <label for="state">State</label>
                    <select id="state" name="state" required>
                        <option value="">Select a state</option>
                        <option value="Maharashtra">Maharashtra</option>
                        <option value="Gujarat">Gujarat</option>
                        <option value="Tamil Nadu">Tamil Nadu</option>
                        <option value="Karnataka">Karnataka</option>
                        <option value="Uttar Pradesh">Uttar Pradesh</option>
                        <option value="Delhi">Delhi</option>
                        <option value="Haryana">Haryana</option>
                        <option value="Punjab">Punjab</option>
                    </select>
                </div>
                
                <div class="button-row">
                    <button type="button" id="resetBtn" class="btn-secondary">Reset</button>
                    <button type="submit">Find Matching Suppliers</button>
                </div>
            </form>
        </div>
        
        <div class="section-divider">
            <h2>AI Matched Suppliers</h2>
        </div>
        
        <div id="results">
            <p class="text-center">Submit an RFQ to see AI-matched suppliers with explainable recommendations.</p>
        </div>
    </main>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Handle form submission
            const rfqForm = document.getElementById('rfqForm');
            rfqForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // Show loading state
                const resultsContainer = document.getElementById('results');
                resultsContainer.innerHTML = `
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>AI matching engine is finding the best suppliers...</p>
                    </div>
                `;
                
                // Collect form data
                const formData = new FormData(rfqForm);
                const rfqData = Object.fromEntries(formData.entries());
                
                try {
                    // Send to API for matching
                    const response = await fetch('https://5000-cp-55aa18a0d2b3.replit.dev/api/match-suppliers', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(rfqData)
                    });
                    
                    if (!response.ok) {
                        throw new Error('Failed to get matches');
                    }
                    
                    const data = await response.json();
                    displayResults(data, rfqData);
                } catch (error) {
                    console.error('Error:', error);
                    resultsContainer.innerHTML = `
                        <div class="card">
                            <h3>Error</h3>
                            <p>Failed to get matching suppliers. Please try again.</p>
                        </div>
                    `;
                }
            });
            
            // Handle reset button
            const resetBtn = document.getElementById('resetBtn');
            resetBtn.addEventListener('click', function() {
                rfqForm.reset();
                document.getElementById('results').innerHTML = `
                    <p class="text-center">Submit an RFQ to see AI-matched suppliers with explainable recommendations.</p>
                `;
            });
            
            // Function to display results
            function displayResults(suppliers, rfqData) {
                const resultsContainer = document.getElementById('results');
                
                if (!suppliers || suppliers.length === 0) {
                    resultsContainer.innerHTML = `
                        <div class="card">
                            <h3>No Matching Suppliers</h3>
                            <p>We couldn't find any suppliers matching your requirements. Try adjusting your RFQ details.</p>
                        </div>
                    `;
                    return;
                }
                
                // Create summary card
                let resultsHTML = `
                    <div class="card">
                        <h3>AI Matching Summary</h3>
                        <p>Based on your RFQ for <strong>${rfqData.title}</strong> in the <strong>${rfqData.category}</strong> category, 
                        we found <strong>${suppliers.length}</strong> potential suppliers with strong matches.</p>
                        <p>The AI matching engine evaluated suppliers based on category specialization, price competitiveness, 
                        past performance, delivery time capability, ratings, and experience.</p>
                    </div>
                    
                    <div class="grid">
                `;
                
                // Create supplier cards
                suppliers.forEach(supplier => {
                    const matchScore = (supplier.match_score * 100).toFixed(0);
                    const scoreColor = matchScore > 80 ? 'var(--success-color)' : 
                                      matchScore > 60 ? 'var(--primary-color)' : 
                                      matchScore > 40 ? 'var(--warning-color)' : 'var(--danger-color)';
                    
                    resultsHTML += `
                        <div class="supplier-card">
                            <div class="match-score" style="background-color: ${scoreColor};">${matchScore}% Match</div>
                            
                            <div class="supplier-info">
                                <h3>${supplier.company_name}</h3>
                                <p>${supplier.name} | ${supplier.city}, ${supplier.state}</p>
                                <p>Specializes in: ${supplier.specializations.join(", ")}</p>
                            </div>
                            
                            <div class="metrics">
                                <div class="metric">
                                    <div class="metric-label">Rating</div>
                                    <div class="metric-value">${supplier.rating.toFixed(1)}/5.0</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-label">Completed</div>
                                    <div class="metric-value">${supplier.total_completed}</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-label">Avg. Delivery</div>
                                    <div class="metric-value">${supplier.avg_delivery_days.toFixed(1)} days</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-label">Success Rate</div>
                                    <div class="metric-value">${(supplier.completion_rate * 100).toFixed(0)}%</div>
                                </div>
                            </div>
                            
                            <div class="explanations">
                                <div class="explanation-title">Why this match?</div>
                    `;
                    
                    // Top 3 factors for explaining the match
                    const topFactors = supplier.shap_values.slice(0, 3);
                    topFactors.forEach(factor => {
                        const isPositive = factor.value >= 0;
                        const barWidth = Math.min(Math.abs(factor.value) * 200, 50) + '%';
                        
                        resultsHTML += `
                            <div class="explanation">
                                <div class="explanation-name">${factor.name}</div>
                                <div class="bar-container">
                                    <div class="bar ${isPositive ? 'positive' : 'negative'}" 
                                         style="width: ${barWidth}"></div>
                                </div>
                                <div class="explanation-value ${isPositive ? 'positive-value' : 'negative-value'}">
                                    ${isPositive ? '+' : ''}${factor.value.toFixed(2)}
                                </div>
                            </div>
                            <div class="explanation-text">${factor.explanation}</div>
                        `;
                    });
                    
                    resultsHTML += `
                            </div>
                        </div>
                    `;
                });
                
                resultsHTML += `</div>`;
                resultsContainer.innerHTML = resultsHTML;
            }
        });
    </script>
</body>
</html>